@page "/bai-hoc"


<Space>
    <SpaceItem>
        <h3>Danh sách các bài học</h3>
    </SpaceItem>
</Space>
<Row Wrap="false" Style="padding: 10px 0px">
    <AntDesign.Col Span="6">
        <Search Placeholder="Tên khóa học" OnChange="SearchAsync" EnterButton="true" @bind-Value="@KeyWord" />
    </AntDesign.Col>
    <AntDesign.Col Flex=@("auto")>
        <Row Justify="end">
            <Space>
                @if (PermissionClaim?.COURSE_ADD == true)
                {
                    <SpaceItem>
                        <Button Icon="plus" OnClick="AddNew">Thêm mới</Button>
                    </SpaceItem>
                }
                @if (PermissionClaim?.COURSE_DELETE == true)
                {
                    <SpaceItem>
                        <Button Icon="delete" OnClick="DeleteSelected">Xóa chọn</Button>
                    </SpaceItem>
                }
            </Space>

        </Row>
    </AntDesign.Col>
</Row>


    <Table @ref="table" TItem="LessonsViewModel" DataSource="@ListViewLessons" @bind-SelectedRows="selectedRows"
           Total="Page.Total"  Loading="loading" ScrollY="600px"
           PageIndex="Page.PageIndex"
           PageSize="Page.PageSize"
           OnPageIndexChange="PageIndexChangeAsync">

        <Selection Key="@context.Id" Type="@selectionType" Disabled="@(context.Id=="Disabled User")" />
        @*<Column @bind-Field="@context.Stt" Sortable />*@
        <Column @bind-Field="@context.TenBaiHoc" Sortable>
            <a>@context.TenBaiHoc</a>
        </Column>
        <Column @bind-Field="@context.MaBaiHoc" />
        <Column @bind-Field="@context.IsTrial">
            <Switch @bind-Value="@context.IsTrial" OnChange="((e) => UpadateStatus(context.Id, e))" />
        </Column>

        <ActionColumn>

        </ActionColumn>
    </Table>



@if (PermissionClaim?.COURSE_ADD == true)
{
    <Drawer Closable="true" MaskClosable="true" Width="720" Visible="DetailVisible"
            Title='($"Thông tin bài học")' OnClose="CloseDetail">
        <Template>
            <InputForm ItemType="LessonsEditModel" Value="EditModel" ValueChanged="SaveCourseAsync" CancelChanged="CloseDetail"></InputForm>
        </Template>
    </Drawer>
}


